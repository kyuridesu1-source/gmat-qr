import { Topic } from '../types';

export const primeNumbersTopic: Topic = {
  slug: 'prime-numbers',
  titleEN: 'Prime Numbers & Divisibility',
  titleKR: '소수와 약수/배수',
  category: 'arithmetic',
  estimatedMinutes: 20,
  ready: true,

  intuition: {
    analogy: "소수는 레고의 '기본 블록'이에요. 4=2×2, 6=2×3처럼 모든 정수는 소수들의 곱으로 분해되지만, 소수 자체는 더 이상 쪼갤 수 없어요. 마치 원소 주기율표의 원소처럼, 소수는 수학의 '원소'입니다.",
    pattern: "2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31... 직접 써보면 간격이 일정하지 않다는 걸 느낄 수 있어요. 2와 3 사이는 1, 3과 5 사이는 2, 7과 11 사이는 4 — 규칙이 없는 게 특징이에요. 하지만 2를 제외하면 모두 홀수라는 건 확실하죠!",
    whyItMatters: "GMAT 문제의 30% 이상이 소수 성질을 '숨겨서' 출제합니다. 특히 Data Sufficiency에서 '1은 소수인가', '짝수인 소수가 있는가' 같은 경계값 함정이 빈출됩니다.",
  },

  commonMistakes: [
    {
      wrong: '1은 소수다',
      correct: '1은 소수가 아닙니다. 소수의 정의는 "약수가 정확히 2개인 수(1과 자기 자신)" — 1의 약수는 1 하나뿐입니다.',
      examTip: 'GMAT은 1을 소수처럼 보이게 하는 함정 선지를 자주 사용합니다. "양의 정수 n이 소수일 때..."라는 조건에서 n=1을 대입하지 마세요.',
    },
    {
      wrong: '2는 짝수니까 소수가 아니다',
      correct: '2는 유일한 짝수 소수입니다. 약수가 1과 2뿐이므로 소수의 정의를 완벽하게 만족합니다.',
      examTip: '"짝수인 소수가 존재하는가?" 유형으로 출제됩니다. 특히 DS 문제에서 "n은 짝수" + "n은 소수" → n=2로 유일하게 결정됩니다.',
    },
    {
      wrong: '음수도 소수가 될 수 있다',
      correct: '소수는 1보다 큰 양의 정수에서만 정의됩니다. -7은 소수가 아닙니다.',
      examTip: 'GMAT은 항상 양의 정수 범위에서 소수를 다루지만, "정수 n"이라는 조건에서 음수 가능성을 함정으로 활용합니다.',
    },
    {
      wrong: '0은 짝수가 아니다',
      correct: '0은 짝수입니다. 0 = 2×0이므로 2로 나누면 나머지가 0입니다.',
      examTip: 'GMAT은 0, 1, 음수를 경계값으로 자주 활용합니다. "양의 짝수"와 "짝수"는 다르다는 점을 항상 확인하세요.',
    },
    {
      wrong: '두 소수의 곱은 항상 홀수다',
      correct: '2 × 3 = 6, 2 × 5 = 10 — 소수 2가 포함되면 곱이 짝수가 됩니다.',
      examTip: '"두 서로 다른 소수의 곱이 짝수가 될 수 있는가?" 같은 문제에서 2의 존재를 잊지 마세요.',
    },
  ],

  theoryContent: `## 소수와 합성수

**Prime Number (소수)**란 1보다 큰 자연수 중에서 1과 자기 자신만을 약수로 가지는 수입니다. 가장 작은 소수는 2이며, 2는 유일한 짝수 소수입니다. 대표적인 소수로는 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31 등이 있습니다.

**Composite Number (합성수)**란 1보다 큰 자연수 중에서 소수가 아닌 수, 즉 1과 자기 자신 외에 다른 약수를 가지는 수입니다. 예를 들어 4, 6, 8, 9, 10, 12 등이 합성수입니다.

중요: 1은 소수도 아니고 합성수도 아닌 특별한 수입니다. GMAT에서 이 점을 묻는 문제가 자주 출제됩니다.

## 약수와 배수

**Factor (약수)** 또는 **Divisor (약수)**란 어떤 수를 나누어떨어지게 하는 수입니다. 예를 들어 12의 약수는 1, 2, 3, 4, 6, 12입니다. 약수를 체계적으로 찾으려면 1부터 시작하여 쌍을 이루는 약수를 찾습니다: 1×12, 2×6, 3×4.

**Multiple (배수)**란 어떤 수에 자연수를 곱한 결과입니다. 예를 들어 5의 배수는 5, 10, 15, 20, 25, ... 입니다.

## 최대공약수와 최소공배수

**Greatest Common Factor (GCF, 최대공약수)**는 두 개 이상의 수의 공통 약수 중 가장 큰 수입니다. **Euclidean Algorithm (유클리드 호제법)**을 사용하면 빠르게 구할 수 있습니다: 큰 수를 작은 수로 나눈 나머지를 구하고, 작은 수를 그 나머지로 다시 나누는 과정을 나머지가 0이 될 때까지 반복합니다. 마지막으로 나눈 수가 GCF입니다.

예시: GCF(48, 18) → 48 = 18×2 + 12 → 18 = 12×1 + 6 → 12 = 6×2 + 0 → GCF = 6

**Least Common Multiple (LCM, 최소공배수)**는 두 개 이상의 수의 공통 배수 중 가장 작은 수입니다.

핵심 공식: **GCF(a, b) × LCM(a, b) = a × b**

이 공식을 이용하면 GCF를 알 때 LCM을 쉽게 구할 수 있고, 그 반대도 가능합니다.

## 배수 판별법 (Divisibility Rules)

- **2의 배수**: 끝자리가 짝수 (0, 2, 4, 6, 8)
- **3의 배수**: 각 자릿수의 합이 3의 배수
- **4의 배수**: 끝 두 자리가 4의 배수 (또는 끝 두 자리가 00)
- **5의 배수**: 끝자리가 0 또는 5
- **6의 배수**: 2의 배수이면서 동시에 3의 배수
- **8의 배수**: 끝 세 자리가 8의 배수
- **9의 배수**: 각 자릿수의 합이 9의 배수

## 소인수분해와 약수의 개수

**Prime Factorization (소인수분해)**란 합성수를 소수의 곱으로 나타내는 것입니다. 예를 들어 360 = 2³ × 3² × 5¹ 입니다.

약수의 개수를 구하는 공식: n = p₁^a₁ × p₂^a₂ × ... × pₖ^aₖ 일 때, **약수의 개수 = (a₁+1)(a₂+1)...(aₖ+1)** 입니다.

예시: 360 = 2³ × 3² × 5¹ → 약수의 개수 = (3+1)(2+1)(1+1) = 4 × 3 × 2 = 24개`,

  formulas: [
    'GCF(a,b) × LCM(a,b) = a × b',
    'n = p₁^a₁ × p₂^a₂ × ... → 약수의 개수 = (a₁+1)(a₂+1)...',
    '2의 배수: 끝자리가 짝수',
    '3의 배수: 각 자릿수의 합이 3의 배수',
    '4의 배수: 끝 두 자리가 4의 배수',
    '5의 배수: 끝자리가 0 또는 5',
    '6의 배수: 2의 배수이면서 3의 배수',
    '9의 배수: 각 자릿수의 합이 9의 배수',
  ],

  glossary: [
    {
      en: 'Prime Number',
      kr: '소수',
      definition: '1보다 큰 자연수 중 1과 자기 자신만을 약수로 가지는 수',
    },
    {
      en: 'Composite Number',
      kr: '합성수',
      definition:
        '1보다 큰 자연수 중 소수가 아닌 수, 즉 1과 자기 자신 외에 다른 약수를 가지는 수',
    },
    {
      en: 'Factor / Divisor',
      kr: '약수',
      definition:
        '어떤 수를 나누어떨어지게 하는 수. 예: 12의 약수는 1, 2, 3, 4, 6, 12',
    },
    {
      en: 'Multiple',
      kr: '배수',
      definition:
        '어떤 수에 자연수를 곱하여 얻어지는 수. 예: 3의 배수는 3, 6, 9, 12, ...',
    },
    {
      en: 'Greatest Common Factor (GCF)',
      kr: '최대공약수',
      definition: '두 개 이상의 자연수의 공통된 약수 중 가장 큰 수',
    },
    {
      en: 'Least Common Multiple (LCM)',
      kr: '최소공배수',
      definition: '두 개 이상의 자연수의 공통된 배수 중 가장 작은 양수',
    },
    {
      en: 'Prime Factorization',
      kr: '소인수분해',
      definition:
        '자연수를 소수들의 곱으로 나타내는 것. 예: 60 = 2² × 3 × 5',
    },
    {
      en: 'Divisibility',
      kr: '나눗셈 가능성 (배수 관계)',
      definition:
        '한 수가 다른 수로 나누어떨어지는 성질. a가 b로 나누어떨어지면 a는 b의 배수',
    },
    {
      en: 'Even Number',
      kr: '짝수',
      definition: '2로 나누어떨어지는 정수. ..., -4, -2, 0, 2, 4, ...',
    },
    {
      en: 'Odd Number',
      kr: '홀수',
      definition:
        '2로 나누어떨어지지 않는 정수. ..., -3, -1, 1, 3, 5, ...',
    },
    {
      en: 'Remainder',
      kr: '나머지',
      definition:
        '나눗셈에서 나누어떨어지지 않을 때 남는 수. 예: 17 ÷ 5 = 3 ... 나머지 2',
    },
    {
      en: 'Quotient',
      kr: '몫',
      definition: '나눗셈의 결과로 얻어지는 값. 예: 17 ÷ 5의 몫은 3',
    },
  ],

  problems: [
    // ==================== EASY (5 problems) ====================
    {
      id: 'prime-1',
      topicSlug: 'prime-numbers',
      question:
        '다음 중 소수(prime number)는 몇 개입니까?\n\n1, 2, 9, 11, 15, 21, 23, 27, 31, 35',
      options: ['2개', '3개', '4개', '5개', '6개'],
      correctIndex: 2,
      explanation:
        '주어진 수들을 하나씩 확인합니다.\n\n• 1: 소수가 아닙니다 (1은 소수도 합성수도 아님)\n• 2: 소수 (유일한 짝수 소수)\n• 9 = 3 × 3: 합성수\n• 11: 소수\n• 15 = 3 × 5: 합성수\n• 21 = 3 × 7: 합성수\n• 23: 소수\n• 27 = 3³: 합성수\n• 31: 소수\n• 35 = 5 × 7: 합성수\n\n소수는 2, 11, 23, 31로 총 4개입니다.',
      difficulty: 'easy',
    },
    {
      id: 'prime-2',
      topicSlug: 'prime-numbers',
      question: '72의 약수(factor)는 모두 몇 개입니까?',
      options: ['8개', '10개', '12개', '14개', '16개'],
      correctIndex: 2,
      explanation:
        '72를 소인수분해합니다.\n72 = 8 × 9 = 2³ × 3²\n\n약수의 개수 공식을 적용합니다:\n약수의 개수 = (3+1)(2+1) = 4 × 3 = 12개\n\n실제로 확인하면: 1, 2, 3, 4, 6, 8, 9, 12, 18, 24, 36, 72 → 12개',
      difficulty: 'easy',
    },
    {
      id: 'prime-3',
      topicSlug: 'prime-numbers',
      question: '48과 36의 최대공약수(GCF)는 얼마입니까?',
      options: ['4', '6', '8', '12', '24'],
      correctIndex: 3,
      explanation:
        '유클리드 호제법을 사용합니다.\n48 = 36 × 1 + 12\n36 = 12 × 3 + 0\n\n나머지가 0이 되었으므로, GCF(48, 36) = 12\n\n또는 소인수분해 방법:\n48 = 2⁴ × 3\n36 = 2² × 3²\nGCF = 2² × 3 = 4 × 3 = 12',
      difficulty: 'easy',
    },
    {
      id: 'prime-4',
      topicSlug: 'prime-numbers',
      question: '다음 중 3의 배수이면서 동시에 4의 배수인 수는?',
      options: ['68', '82', '102', '132', '145'],
      correctIndex: 3,
      explanation:
        '3의 배수이면서 4의 배수인 수는 12의 배수입니다.\n\n각 선택지를 확인합니다:\n• 68: 6+8=14 (3의 배수 아님) → 탈락\n• 82: 8+2=10 (3의 배수 아님) → 탈락\n• 102: 1+0+2=3 (3의 배수), 끝 두 자리 02 (4의 배수 아님) → 탈락\n• 132: 1+3+2=6 (3의 배수), 끝 두 자리 32 = 4×8 (4의 배수) → 정답!\n• 145: 1+4+5=10 (3의 배수 아님) → 탈락\n\n132 = 12 × 11이므로 12의 배수입니다.',
      difficulty: 'easy',
    },
    {
      id: 'prime-5',
      topicSlug: 'prime-numbers',
      question: '두 수 15와 20의 최소공배수(LCM)는 얼마입니까?',
      options: ['40', '50', '60', '80', '300'],
      correctIndex: 2,
      explanation:
        'GCF(15, 20)을 먼저 구합니다.\n15 = 3 × 5\n20 = 2² × 5\nGCF = 5\n\nGCF × LCM = a × b 공식을 사용합니다.\n5 × LCM = 15 × 20 = 300\nLCM = 300 ÷ 5 = 60\n\n검증: 60 = 15 × 4 = 20 × 3 ✓',
      difficulty: 'easy',
    },

    // ==================== MEDIUM (6 problems) ====================
    {
      id: 'prime-6',
      topicSlug: 'prime-numbers',
      question: '360의 양의 약수(positive factor)는 모두 몇 개입니까?',
      options: ['18개', '20개', '24개', '28개', '30개'],
      correctIndex: 2,
      explanation:
        '360을 소인수분해합니다.\n360 = 36 × 10 = (2² × 3²) × (2 × 5) = 2³ × 3² × 5¹\n\n약수의 개수 공식을 적용합니다:\n약수의 개수 = (3+1)(2+1)(1+1) = 4 × 3 × 2 = 24개',
      difficulty: 'medium',
    },
    {
      id: 'prime-7',
      topicSlug: 'prime-numbers',
      question:
        '양의 정수 n이 12로도 나누어떨어지고 18로도 나누어떨어질 때, n이 될 수 있는 가장 작은 양의 정수는?',
      options: ['24', '36', '48', '72', '216'],
      correctIndex: 1,
      explanation:
        'n이 12의 배수이면서 18의 배수이므로, n은 12와 18의 공배수입니다.\n가장 작은 값은 LCM(12, 18)입니다.\n\n12 = 2² × 3\n18 = 2 × 3²\n\nLCM = 2² × 3² = 4 × 9 = 36\n\n검증: 36 ÷ 12 = 3 ✓, 36 ÷ 18 = 2 ✓',
      difficulty: 'medium',
    },
    {
      id: 'prime-8',
      topicSlug: 'prime-numbers',
      question: '40과 60 사이에 있는 소수(prime number)는 몇 개입니까?',
      options: ['3개', '4개', '5개', '6개', '7개'],
      correctIndex: 2,
      explanation:
        '40과 60 사이(41~59)의 각 홀수를 소수인지 확인합니다. (짝수는 2를 제외하면 소수가 아님)\n\n• 41: 소수 (√41 ≈ 6.4이므로, 2·3·5로 나누어지지 않음)\n• 43: 소수 (√43 ≈ 6.6이므로, 2·3·5로 나누어지지 않음)\n• 45 = 9 × 5: 합성수\n• 47: 소수 (√47 ≈ 6.9이므로, 2·3·5로 나누어지지 않음)\n• 49 = 7 × 7: 합성수\n• 51 = 3 × 17: 합성수\n• 53: 소수 (√53 ≈ 7.3이므로, 2·3·5·7로 나누어지지 않음)\n• 55 = 5 × 11: 합성수\n• 57 = 3 × 19: 합성수\n• 59: 소수 (√59 ≈ 7.7이므로, 2·3·5·7로 나누어지지 않음)\n\n소수: 41, 43, 47, 53, 59 → 총 5개',
      difficulty: 'medium',
    },
    {
      id: 'prime-9',
      topicSlug: 'prime-numbers',
      question:
        '두 양의 정수의 곱이 180이고 최대공약수(GCF)가 6일 때, 두 수의 최소공배수(LCM)는?',
      options: ['15', '18', '24', '30', '36'],
      correctIndex: 3,
      explanation:
        'GCF × LCM = a × b 공식을 사용합니다.\n\n6 × LCM = 180\nLCM = 180 ÷ 6 = 30\n\n검증: a = 6m, b = 6n (m, n은 서로소)으로 놓으면\n6m × 6n = 180 → mn = 5\nm과 n이 서로소인 쌍: (1, 5)\n따라서 (a, b) = (6, 30)\nLCM(6, 30) = 30 ✓',
      difficulty: 'medium',
    },
    {
      id: 'prime-10',
      topicSlug: 'prime-numbers',
      question:
        '양의 정수 n = 2⁴ × 3² × 7의 약수 중 짝수인 약수는 몇 개입니까?',
      options: ['12개', '15개', '18개', '24개', '30개'],
      correctIndex: 3,
      explanation:
        '먼저 전체 약수의 개수를 구합니다.\nn = 2⁴ × 3² × 7¹\n전체 약수의 개수 = (4+1)(2+1)(1+1) = 5 × 3 × 2 = 30개\n\n홀수 약수는 2를 포함하지 않는 약수입니다.\n홀수 약수의 개수 = 3² × 7¹의 약수의 개수 = (2+1)(1+1) = 3 × 2 = 6개\n\n따라서 짝수 약수의 개수 = 전체 - 홀수 = 30 - 6 = 24개\n\n다른 풀이: 짝수 약수는 반드시 2를 최소 1개 포함해야 하므로\n2의 지수: 1, 2, 3, 4 중 택1 (4가지)\n3의 지수: 0, 1, 2 중 택1 (3가지)\n7의 지수: 0, 1 중 택1 (2가지)\n짝수 약수 = 4 × 3 × 2 = 24개',
      difficulty: 'medium',
    },
    {
      id: 'prime-11',
      topicSlug: 'prime-numbers',
      question:
        '세 자리 수 5A2가 9의 배수가 되려면, A에 들어갈 수 있는 한 자리 숫자는?',
      options: ['0', '2', '4', '6', '8'],
      correctIndex: 1,
      explanation:
        '9의 배수 판별법: 각 자릿수의 합이 9의 배수여야 합니다.\n\n5 + A + 2 = 7 + A\n\nA는 0~9 사이의 한 자리 숫자이므로 7 + A의 범위는 7~16입니다.\n이 범위에서 9의 배수는 9뿐입니다.\n\n7 + A = 9 → A = 2\n\n검증: 522의 자릿수 합 = 5 + 2 + 2 = 9 (9의 배수 ✓)\n522 ÷ 9 = 58 ✓',
      difficulty: 'medium',
    },

    // ==================== HARD (4 problems) ====================
    {
      id: 'prime-12',
      topicSlug: 'prime-numbers',
      question: '2¹⁰을 7로 나눈 나머지는 얼마입니까?',
      options: ['1', '2', '3', '4', '5'],
      correctIndex: 1,
      explanation:
        '2의 거듭제곱을 7로 나눈 나머지의 패턴을 찾습니다.\n\n2¹ = 2 → 나머지 2\n2² = 4 → 나머지 4\n2³ = 8 → 나머지 1\n2⁴ = 16 → 나머지 2\n2⁵ = 32 → 나머지 4\n2⁶ = 64 → 나머지 1\n\n나머지가 2, 4, 1, 2, 4, 1, ... 로 주기 3으로 반복됩니다.\n\n10 ÷ 3 = 3 나머지 1이므로, 2¹⁰의 나머지는 주기의 1번째 값인 2입니다.\n\n검증: 2¹⁰ = 1024, 1024 = 7 × 146 + 2, 나머지 = 2 ✓',
      difficulty: 'hard',
    },
    {
      id: 'prime-13',
      topicSlug: 'prime-numbers',
      question:
        '두 양의 정수 a, b의 곱 a × b = 2160이고, GCF(a, b) = 12일 때, 가능한 순서쌍 (a, b)의 개수는? (단, a < b)',
      options: ['1개', '2개', '3개', '4개', '5개'],
      correctIndex: 1,
      explanation:
        'GCF(a, b) = 12이므로 a = 12m, b = 12n (m, n은 서로소, m < n)으로 놓습니다.\n\na × b = 12m × 12n = 144mn = 2160\nmn = 2160 ÷ 144 = 15\n\nmn = 15가 되는 서로소인 양의 정수 쌍 (m, n)을 찾습니다 (m < n):\n15 = 1 × 15 → GCD(1, 15) = 1 ✓ → (a, b) = (12, 180)\n15 = 3 × 5 → GCD(3, 5) = 1 ✓ → (a, b) = (36, 60)\n15 = 5 × 3 → m < n 조건 불만족\n\n검증:\n• 12 × 180 = 2160 ✓, GCF(12, 180) = 12 ✓\n• 36 × 60 = 2160 ✓, GCF(36, 60) = 12 ✓\n\n따라서 가능한 순서쌍은 2개입니다.',
      difficulty: 'hard',
    },
    {
      id: 'prime-14',
      topicSlug: 'prime-numbers',
      question:
        'n이 양의 정수이고 n²이 정확히 9개의 양의 약수를 가질 때, n이 될 수 있는 가장 작은 양의 정수는?',
      options: ['4', '6', '8', '9', '16'],
      correctIndex: 1,
      explanation:
        'n²의 약수 개수가 9개가 되는 조건을 분석합니다.\n\nn = p₁^a₁ × p₂^a₂ × ... 이면 n² = p₁^(2a₁) × p₂^(2a₂) × ...\nn²의 약수의 개수 = (2a₁+1)(2a₂+1)... = 9\n\n9를 홀수들의 곱으로 분해하면:\n경우 1: 9 = 9 → 2a₁+1 = 9 → a₁ = 4 → n = p⁴\n가장 작은 값: n = 2⁴ = 16\n\n경우 2: 9 = 3 × 3 → 2a₁+1 = 3, 2a₂+1 = 3 → a₁ = 1, a₂ = 1 → n = p × q\n가장 작은 값: n = 2 × 3 = 6\n\n6 < 16이므로 가장 작은 n = 6\n\n검증: n = 6, n² = 36 = 2² × 3²\n약수의 개수 = (2+1)(2+1) = 9개\n36의 약수: 1, 2, 3, 4, 6, 9, 12, 18, 36 → 9개 ✓',
      difficulty: 'hard',
    },
    {
      id: 'prime-15',
      topicSlug: 'prime-numbers',
      question:
        '양의 정수 n이 3으로 나누면 나머지가 2이고, 5로 나누면 나머지가 3이고, 7로 나누면 나머지가 4일 때, 이 조건을 만족하는 가장 작은 양의 정수 n은?',
      options: ['38', '53', '68', '83', '158'],
      correctIndex: 1,
      explanation:
        '조건을 정리합니다:\n• n ≡ 2 (mod 3)\n• n ≡ 3 (mod 5)\n• n ≡ 4 (mod 7)\n\n먼저 n ≡ 3 (mod 5)인 수를 나열합니다: 3, 8, 13, 18, 23, 28, 33, 38, 43, 48, 53, ...\n\n이 중에서 n ≡ 2 (mod 3)인 수를 찾습니다:\n• 8: 8 ÷ 3 = 2 나머지 2 ✓\n• 23: 23 ÷ 3 = 7 나머지 2 ✓\n• 38: 38 ÷ 3 = 12 나머지 2 ✓\n• 53: 53 ÷ 3 = 17 나머지 2 ✓\n→ 공차 15인 등차수열: 8, 23, 38, 53, 68, ...\n\n이 중에서 n ≡ 4 (mod 7)인 수를 찾습니다:\n• 8: 8 ÷ 7 = 1 나머지 1 ✗\n• 23: 23 ÷ 7 = 3 나머지 2 ✗\n• 38: 38 ÷ 7 = 5 나머지 3 ✗\n• 53: 53 ÷ 7 = 7 나머지 4 ✓\n\n세 조건 모두 확인:\n53 ÷ 3 = 17 나머지 2 ✓\n53 ÷ 5 = 10 나머지 3 ✓\n53 ÷ 7 = 7 나머지 4 ✓\n\n따라서 가장 작은 양의 정수 n = 53',
      difficulty: 'hard',
    },
  ],
};
